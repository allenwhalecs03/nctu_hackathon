{% extends './../frame.html' %}
{% block content %}

<h1>我的商品</h1><br>
<div class="row">
    <div class="col-md-8 col-md-offset-2">
        <input name="product_name" type="text"/>
        <table class="table table-striped table-bordered table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>名稱</th>
                    <th>價錢</th>
                </tr>
            </thead>
            <tbody name="tbody">
                {% for item in data %}
                <tr product-id="{{ item['id'] }}">
                    <td>{{ item["id"] }}</td>
                    <td name="name">{{ item["name"] }}</td>
                    <td>{{ item["price"] }}</td>
                </tr>
                {% end %}
            </tbody>
        </table>
    </div>
</div>
<script>
require(["jquery"], function($){
    $('[name=product_name]').change(function(){
        var filter = $(this).val();
        $('tr').each(function(idx, val){
            if($(val).find('[name=name]').text().indexOf(filter) >= 0){
                $(val).show();
            }else{
                $(val).hide();
            }
        });
    });
});

</script>

{% end %}
